<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>Saving a vim session before quitting</title>

    <meta name="description" content="">
    <meta name="author" content="bacardi55">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    
          <link rel="stylesheet" href="../../../../css/bootstrap.min.css">
      <link rel="stylesheet" href="../../../../css/bootstrap-responsive.min.css">
      <link rel="stylesheet" href="../../../../css/main.css">
    
    <script src="../../../../js/vendor/modernizr-2.6.1-respond-1.1.0.min.js"></script>
  </head>

  <body>
    <!--[if lt IE 7]>
        <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
    <![endif]-->

    
        <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="brand" href="../../../..">bacardi55&#039;s blog</a>
                <div class="nav-collapse collapse">
                                            <ul class="nav">
                                                                                                                        <li><a href="../../../../about.html">About me</a></li>
                                                                                                                                <li><a href="../../../../about-this-blog.html">About this blog</a></li>
                                                                                        <li><a href="http://projects.bacardi55.org">My projects</a></li>
                                                </ul>
                    
                                            <ul class="nav pull-right">
                            <li>
                              <a href="index.atom"><img src="../../../../images/rss.png" /></a>
                            </li>
                            <li class="dropdown">
                                <a class="dropdown-toggle" title="Other OSS project" data-toggle="dropdown" href="#">
                                    Bacardi55
                                    <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu">
                                    <li><a href="http://bacardi55.org" alt="bacardi55 home"><i class="icon-home"></i> My home</a><li>
                                    <li><a href="http://projects.bacardi55.org" alt="my projects"><i class="icon-briefcase"></i> My projects</a><li>
                                    <li class="divider"></li>
                                    <li><a href="http://github.com/bacardi55/" alt="my github"><i class="icon-globe"></i> My Github</a><li>
                                    <li><a href="https://lab.bacardi55.org" alt="bacardi55's lab"><i class="icon-globe"></i> My lab</a><li>
                                    <li><a href="http://twitter.com/bacardi555" alt="my twitter"><i class="icon-globe"></i> My twitter</a><li>
                                </ul>
                            </li>
                        </ul>
                                    </div>
            </div>
        </div>
    </div>

    
          <div class="container">

        
            <div class="row">
        <div class="span10 offset1 content">
                                                <div class="page-header">
                        <h1>Saving a vim session before quitting</h1>
                    </div>
                            
                            <div class="pull-left">
                                            By <i class="icon-user"></i>bacardi55 -
                                        <i class="icon-calendar"></i>2013 February 21
                </div>
                                    <div class="pull-right">
                        <ul class="tag_box inline">
                                                      <li>
                                <i class="icon-tag"></i>
                                <a href="../../../../tags/vim.html">
                                    vim
                                </a>
                            </li>
                                                  </ul>
                    </div>
                    <div class="clearfix"></div>
                                <hr />

                <p>When you working on a project, you often have a lot of files open in your <a href="http://vim.org">vim</a>. I use split and tab a lot to open all I need to work on a feature.</p>

<p>I leave my <a href="http://vim.org">vim</a> open as much as possible to avoid the pain of reopening them all everyday. Obviously, this isn't enough as sometime you don't have other choice than closing it (restarting your computer for example).</p>

<p>I started using the mksession command:</p>

<p><code>!mksession</code> (or without the ! if you don't want to override a previous session file).</p>

<p>This command let you save your vim session and then reopen it by launching vim like this:</p>

<p><code>vim -S /path/session/file</code></p>

<p>I was fed up of doing this -S stuff every time, so I changed for something a little bit more automatic.
I mapped to <code>SQ</code> a command that create a vim session in the current directory so I just use SQ for quitting and I know that there will be a session file generated thanks to this command.</p>

<p>After that, I just added an «autoloading» configuration to load a session file in the current directory if any exist.</p>

<p>This is the stuff I added in my vimrc:</p>

<pre class="bash" style="font-family:monospace;"><span style="color: #ff0000;">&quot;&quot;</span><span style="color: #ff0000;">&quot; SESSION
function! RestoreSession()
  if argc() == 0 &quot;</span><span style="color: #c20cb9; font-weight: bold;">vim</span> called without arguments
    <span style="color: #7a0874; font-weight: bold;">let</span> <span style="color: #007800;">FILESESSION</span>=expand<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #ff0000;">&quot;./session.vim&quot;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>
    <span style="color: #000000; font-weight: bold;">if</span> filereadable<span style="color: #7a0874; font-weight: bold;">&#40;</span>FILESESSION<span style="color: #7a0874; font-weight: bold;">&#41;</span>
      execute <span style="color: #ff0000;">'source ./session.vim'</span>
    endif
  end
endfunction
&nbsp;
<span style="color: #c20cb9; font-weight: bold;">nmap</span> SQ <span style="color: #000000; font-weight: bold;">&lt;</span>ESC<span style="color: #000000; font-weight: bold;">&gt;</span>:mksession<span style="color: #000000; font-weight: bold;">!</span> .<span style="color: #000000; font-weight: bold;">/</span>session.vim<span style="color: #000000; font-weight: bold;">&lt;</span>CR<span style="color: #000000; font-weight: bold;">&gt;</span>:wqa<span style="color: #000000; font-weight: bold;">&lt;</span>CR<span style="color: #000000; font-weight: bold;">&gt;</span>
autocmd VimEnter <span style="color: #000000; font-weight: bold;">*</span> call RestoreSession<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span></pre>

<p>Now, I just need to open vim from the root directory of the project and think about leaving using SQ to generate the session file. The next time, I just need to go to root directory of the project and open vim without argument and the session will be loaded.</p>

<p>/!\ If you open a file directly (by using <code>vim ./path/to/file</code>), the session won't be open.</p>

<p>It makes sens for me to do this in the project root directory as I already have my ctags file there, as explain in <a href="/2013/02/20/using-vim-and-ctags-for-php-development.html">this blog post</a>.</p>

<p>As long as I open vim from the root directory of each project, my ctags and my session will be loaded :)</p>

<p>Isn't that beautiful ? :)</p>


                    </div>
      </div>
      <br /><br />
      <div class="row">
        <div  class="content span10 offset1" id="jocs" ng-app="jocsApp">
          <div class="container" ng-view></div>
        </div>
      </div>

            <footer>
        <p>
            In case of any remarks or questions, please use the <a href="https://github.com/bacardi55/b-55-log/issues">github tracker</a> :)
        <p>
        <p>
            &copy;
                            <a href="http://bacardi55.org">
                  bacardi55
                </a>
                        2013
            <small>
                with help from <a href="http://carew.github.com/" target="_blank">Carew</a>
            </small>
        </p>
    </footer>
      </div>
    
        

    <script src="/jocs/components/angular/angular.js"></script>
    <script src="/jocs/components/angular-resource/angular-resource.js"></script>
    <script src="/jocs/components/angular-cookies/angular-cookies.js"></script>
    <script src="/jocs/components/angular-sanitize/angular-sanitize.js"></script>

    <!-- build:js scripts/scripts.js -->
    <script src="/jocs/scripts/70b83075.scripts.js"></script>
    <!-- endbuild -->

            <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
      <script>window.jQuery || document.write('<script src="../../../../js/vendor/jquery-1.9.0.min.js"><\/script>')</script>
      <script src="../../../../js/vendor/bootstrap.min.js"></script>
    
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-167056-9']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </body>
</html>
